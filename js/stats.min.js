function injuryDiceToResult(e){if(2!=e.length)return null;var t=e[0]+e[1];return t<8?0:t<10?1:2}function casualtyDiceToResult(e){return 1!=e.length?null:e[0]<=38?0:e[0]<=48?1:e[0]<=52?2:e[0]<=54?3:e[0]<=56?4:e[0]<=57?5:e[0]<=58?6:7}function initStats(e,t){t in e||1==rollTypeIdToDiceType(t)&&(e[t]={diceType:1,expected:[1/6,1/6,1/6,1/6,1/6,1/6],0:{total:0,histogram:[0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0]}})}function rollTypeIdToDiceType(e){switch(e){case-2:return 2;case-1:return 6;case 1:case 2:return 1;case 3:return 3;case 4:return 4;case 5:return 0;case 6:case 7:return 1;case 8:return 5;case 9:return 1;case 10:return 2;case 11:return 7;case 12:case 16:case 17:case 20:case 21:case 22:case 23:case 24:return 1;case 26:return 2;case 29:case 27:case 31:return 1;case 34:return 3;case 36:case 37:case 40:case 42:case 46:case 54:case 55:case 56:return 1;case 58:return 2;default:return null}}stats={calculateStats:function(e,t){for(var a={standard:{diceType:1,0:{total:0,histogram:[0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0]},expected:[1/6,1/6,1/6,1/6,1/6,1/6]},scatter:{diceType:2,0:{total:0,histogram:[0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0]},expected:[1/8,1/8,1/8,1/8,1/8,1/8,1/8,1/8]},block:{diceType:0,0:{total:0,histogram:[0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0]},expected:[1/6,1/6,2/6,1/6,1/6]},"1db":{diceType:0,0:{total:0,histogram:[0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0]},expected:[1/6,1/6,2/6,1/6,1/6]},"2db":{diceType:-1,0:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},expected:[1/36,2/36,4/36,2/36,2/36,1/36,4/36,2/36,2/36,4/36,4/36,4/36,1/36,2/36,1/36]},armour:{diceType:3,0:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},expected:[1/36,2/36,3/36,4/36,5/36,6/36,5/36,4/36,3/36,2/36,1/36]},injury:{diceType:4,0:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0,0,0,0]},expected:[1/36,2/36,3/36,4/36,5/36,6/36,5/36,4/36,3/36,2/36,1/36]},casualty:{diceType:5,0:{total:0,histogram:[0,0,0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0,0,0]},expected:[.5,1/6,2/48,2/48,2/48,1/48,1/48,1/6]},2:{diceType:1,0:{total:0,histogram:[0,0,0,0,0,0]},1:{total:0,histogram:[0,0,0,0,0,0]},expected:[1/6,1/6,1/6,1/6,1/6,1/6]}},r=0;r<e.length;r++){var c=e[r],i=c.team;c.player in t&&(i=t[c.player].teamId);var s=c.rollType,o=rollTypeIdToDiceType(s);if(null!==o){if(3==o){for(var l=0,n=0;n<c.dice.length;n++)l+=c.dice[n]-1;a.armour[i].total++,a.armour[i].histogram[l]++}else if(4==o){for(l=0,n=0;n<c.dice.length;n++)l+=c.dice[n]-1;a.injury[i].total++,a.injury[i].histogram[l]++}else if(5==o){var d=casualtyDiceToResult(c.dice);null!==d&&(a.casualty[i].total++,a.casualty[i].histogram[d]++)}else if(null!==o)for(n=0;n<c.dice.length;n++){var u,h=c.dice[n];0==o?u=a.block[i]:1==o||7==o?(h--,u=a.standard[i]):2==o&&(h--,u=a.scatter[i]),u&&(u.total++,u.histogram[h]++)}if(0===o){if(1==c.dice.length){h=c.dice[0];a["1db"][i].total++,a["1db"][i].histogram[h]++}else if(2==c.dice.length){for(var g=Math.min(c.dice[0],c.dice[1]),m=Math.max(c.dice[0],c.dice[1]),p=0,y=g;y>0;y--)p+=y;h=5*g+m-p;a["2db"][i].total++,a["2db"][i].histogram[h]++}}else if(1==o)if(c.dice.length>1);else{initStats(a,s);h=c.dice[0]-1;a[s][i].total++,a[s][i].histogram[h]++}}}return a}};